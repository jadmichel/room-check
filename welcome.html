import qrcode
from PIL import Image

# 1. Configuration
url = "https://jadmichel.github.io/room-check/welcome.html"
logo_path = "La Veranda LOGO.png"
output_name = "Welcome_Reception_QR.png"

# 2. Setup QR - High contrast Black & White
qr = qrcode.QRCode(
    version=1,
    error_correction=qrcode.constants.ERROR_CORRECT_H, # High error correction for logo embedding
    box_size=10,
    border=4,
)
qr.add_data(url)
qr.make(fit=True)

# Classic Black and White for best scanning
img_qr = qr.make_image(fill_color="black", back_color="white").convert('RGB')

# 3. Add Logo
try:
    logo = Image.open(logo_path)
    qr_w, qr_h = img_qr.size
    logo_size = qr_w // 4
    logo = logo.resize((logo_size, logo_size), Image.Resampling.LANCZOS)
    
    pos = ((qr_w - logo_size) // 2, (qr_h - logo_size) // 2)
    img_qr.paste(logo, pos, mask=logo if logo.mode == 'RGBA' else None)
    print("Success: High-contrast QR generated.")
except Exception as e:
    print(f"Logo error: {e}. Generating standard black/white QR.")

img_qr.save(output_name)
print(f"File saved: {output_name}")
